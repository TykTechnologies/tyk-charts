## Tyk Pump
Tyk Pump is a pluggable analytics purger to move Analytics generated by your Tyk nodes to any back-end.

[Overview of Tyk Pump](https://tyk.io/docs/tyk-pump/)

[More on pump configurations](https://github.com/TykTechnologies/tyk-pump/blob/master/README.md#pumps--back-ends-supported)

## Introduction
This chart deploys the open source Tyk pump on a [Kubernetes](https://kubernetes.io/) cluster using the [Helm](https://helm.sh/) package manager.

For typical usage, we recommend using following umbrella charts:
* For Tyk Open Source, please use [tyk-oss](https://github.com/TykTechnologies/tyk-charts/tree/main/tyk-oss)
* Coming soon: For Tyk Hybrid Gateway with Tyk Cloud, please use [tyk-hybrid-gateway](https://github.com/TykTechnologies/tyk-charts/tree/main/)
* Coming soon: For Tyk Self-Managed, please use [tyk-self-managed](https://github.com/TykTechnologies/tyk-charts/tree/main/)

[Learn more about different deployment options](https://tyk.io/docs/apim/)

## Prerequisites
* Kuberentes 1.19+
* Helm 3+
* Redis 
* Mongo/Postgres 

## Installing the Chart
<!--
To install the chart from the Helm repository in namespace `tyk` with the release name `tyk-pump`:
    helm repo add tyk-helm https://helm.tyk.io/public/helm/charts/
    helm show values tyk-helm/tyk-pump > values-pump.yaml
    helm install tyk-pump tyk-helm/tyk-pump -n tyk --create-namespace -f values-pump.yaml
-->

<!-- To be removed after the chart is published -->
To install the chart from Git repository in namespace `tyk` with the release name `tyk-pump`:

    git clone https://github.com/TykTechnologies/tyk-charts.git
    cd tyk-charts
    helm show values tyk-pump > values-pump.yaml
    helm install tyk-pump tyk-pump -n tyk --create-namespace -f values-pump.yaml

Note: Set redis connection details first. See [Configuration](#configuration) below.

## Uninstalling the Chart

    helm uninstall tyk-pump -n tyk

This removes all the Kubernetes components associated with the chart and deletes the release.

## Upgrading Chart

    helm upgrade tyk-pump tyk-pump -n tyk

### Upgrading from tyk-headless chart
Please see Migration notes in tyk-oss chart

## Configuration
See [Customizing the Chart Before Installing](https://helm.sh/docs/intro/using_helm/#customizing-the-chart-before-installing). To get all configurable options with detailed comments:

    helm show values tyk-gateway > values.yaml
    
You can update any value in your local values.yaml file and use `-f [filename]` flag to override default values during installation. Alternatively, you can use `--set` flag to set it in Tyk installation.

### Set Redis conenction details (Required)
Redis is Tyk Pump's primary database where it scrapes Tyk Gateway analytics from. You may set `redis.addr` and `redis.pass` with redis connection string and password respectively.

### Default Pump Configurations


### Set environment variables

Tyk can be configured using environment variables. You can provide a list of environment variables at `gateway.extraEnvs`. See [Tyk Docs](https://tyk.io/docs/tyk-oss-gateway/configuration/) for a list of options available.

### Set values via secrets

You can specify some of the values via secrets.
